2026-01-30T22:51:32.351Z [DEBUG] [init] configureGlobalMTLS starting
2026-01-30T22:51:32.351Z [DEBUG] [init] configureGlobalMTLS complete
2026-01-30T22:51:32.351Z [DEBUG] [init] configureGlobalAgents starting
2026-01-30T22:51:32.351Z [DEBUG] [init] configureGlobalAgents complete
2026-01-30T22:51:32.368Z [DEBUG] [STARTUP] Loading MCP configs...
2026-01-30T22:51:32.384Z [DEBUG] [ToolSearch:optimistic] mode=tst-auto, ENABLE_TOOL_SEARCH=undefined, result=true
2026-01-30T22:51:32.385Z [DEBUG] [STARTUP] Running setup()...
2026-01-30T22:51:32.387Z [DEBUG] Found 0 plugins (0 enabled, 0 disabled)
2026-01-30T22:51:32.408Z [DEBUG] Loading skills from: managed=/etc/claude-code/.claude/skills, user=/root/.claude/skills, project=[]
2026-01-30T22:51:32.410Z [DEBUG] Error log sink initialized
2026-01-30T22:51:32.418Z [DEBUG] getPluginSkills: Processing 0 enabled plugins
2026-01-30T22:51:32.418Z [DEBUG] Total plugin skills loaded: 0
2026-01-30T22:51:32.418Z [DEBUG] Total plugin commands loaded: 0
2026-01-30T22:51:32.418Z [DEBUG] Registered 0 hooks from 0 plugins
2026-01-30T22:51:32.429Z [DEBUG] [STARTUP] setup() completed in 44ms
2026-01-30T22:51:32.429Z [DEBUG] [STARTUP] Loading commands and agents...
2026-01-30T22:51:32.430Z [DEBUG] [claudeai-mcp] Checking gate (cached)...
2026-01-30T22:51:32.431Z [DEBUG] [claudeai-mcp] Gate returned: false
2026-01-30T22:51:32.431Z [DEBUG] [claudeai-mcp] Disabled via gate
2026-01-30T22:51:32.438Z [DEBUG] Total plugin agents loaded: 0
2026-01-30T22:51:32.438Z [DEBUG] Loaded 0 unique skills (managed: 0, user: 0, project: 0, legacy commands: 0)
2026-01-30T22:51:32.438Z [DEBUG] getSkills returning: 0 skill dir commands, 0 plugin skills, 1 bundled skills
2026-01-30T22:51:32.442Z [DEBUG] [STARTUP] Commands and agents loaded in 13ms
2026-01-30T22:51:32.443Z [DEBUG] [LSP MANAGER] initializeLspServerManager() called
2026-01-30T22:51:32.443Z [DEBUG] [LSP MANAGER] Created manager instance, state=pending
2026-01-30T22:51:32.443Z [DEBUG] [LSP MANAGER] Starting async initialization (generation 1)
2026-01-30T22:51:32.456Z [DEBUG] Total LSP servers loaded: 0
2026-01-30T22:51:32.456Z [DEBUG] [STARTUP] MCP configs loaded in 88ms
2026-01-30T22:51:32.456Z [DEBUG] [LSP SERVER MANAGER] getAllLspServers returned 0 server(s)
2026-01-30T22:51:32.456Z [DEBUG] LSP manager initialized with 0 servers
2026-01-30T22:51:32.456Z [DEBUG] LSP server manager initialized successfully
2026-01-30T22:51:32.456Z [DEBUG] LSP notification handlers registered successfully for all 0 server(s)
2026-01-30T22:51:32.470Z [DEBUG] installed_plugins.json doesn't exist, returning empty V2 object
2026-01-30T22:51:32.470Z [DEBUG] Initialized versioned plugins system with 0 plugins
2026-01-30T22:51:32.472Z [DEBUG] [Perfetto] initializePerfettoTracing called, env value: undefined
2026-01-30T22:51:32.515Z [DEBUG] Writing to temp file: /root/.claude/todos/697840bb-37f9-4e1c-b555-a2548e063196-agent-697840bb-37f9-4e1c-b555-a2548e063196.json.tmp.7192.1769813492515
2026-01-30T22:51:32.524Z [DEBUG] Temp file written successfully, size: 2 bytes
2026-01-30T22:51:32.524Z [DEBUG] Renaming /root/.claude/todos/697840bb-37f9-4e1c-b555-a2548e063196-agent-697840bb-37f9-4e1c-b555-a2548e063196.json.tmp.7192.1769813492515 to /root/.claude/todos/697840bb-37f9-4e1c-b555-a2548e063196-agent-697840bb-37f9-4e1c-b555-a2548e063196.json
2026-01-30T22:51:32.525Z [DEBUG] File /root/.claude/todos/697840bb-37f9-4e1c-b555-a2548e063196-agent-697840bb-37f9-4e1c-b555-a2548e063196.json written atomically
2026-01-30T22:51:32.664Z [DEBUG] Getting matching hook commands for SessionStart with query: startup
2026-01-30T22:51:32.664Z [DEBUG] Found 0 hook matchers in settings
2026-01-30T22:51:32.664Z [DEBUG] Matched 0 unique hooks for query "startup" (0 before deduplication)
2026-01-30T22:51:32.678Z [DEBUG] Total plugin output styles loaded: 0
2026-01-30T22:51:32.723Z [DEBUG] Ripgrep first use test: PASSED (mode=builtin, path=/usr/lib/node_modules/@anthropic-ai/claude-code/vendor/ripgrep/x64-linux/rg)
2026-01-30T22:51:32.741Z [DEBUG] Stats cache does not exist, returning empty cache
2026-01-30T22:51:32.741Z [DEBUG] Stats cache empty, processing all historical data in background
2026-01-30T22:51:32.793Z [DEBUG] [API:request] Creating client, ANTHROPIC_CUSTOM_HEADERS present: false, has Authorization header: false
2026-01-30T22:51:32.793Z [DEBUG] [API:auth] OAuth token check starting
2026-01-30T22:51:32.795Z [DEBUG] Hooks: Found 0 total hooks in registry
2026-01-30T22:51:32.795Z [DEBUG] Hooks: checkForNewResponses returning 0 responses
2026-01-30T22:51:32.795Z [DEBUG] Sending 1 skills via attachment (initial, 1 total sent)
2026-01-30T22:51:32.795Z [DEBUG] LSP Diagnostics: getLSPDiagnosticAttachments called
2026-01-30T22:51:32.795Z [DEBUG] LSP Diagnostics: Checking registry - 0 pending
2026-01-30T22:51:32.795Z [DEBUG] [API:auth] OAuth token check complete
2026-01-30T22:51:32.801Z [DEBUG] Getting matching hook commands for UserPromptSubmit with query: undefined
2026-01-30T22:51:32.801Z [DEBUG] Found 0 hook matchers in settings
2026-01-30T22:51:32.801Z [DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
2026-01-30T22:51:32.811Z [ERROR] Error: Error: Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
    at gy.validateHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:1008)
    at gy.buildHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:8502)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async gy.buildRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:7560)
    at async gy.makeRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:3388)
    at async file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3286:18631
    at async file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:1027:2232
    at async Sk9 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:1026:17215)
    at async Ls7 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:1027:2165)
    at async mF1 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3286:3684)
2026-01-30T22:51:32.813Z [DEBUG] countTokensWithFallback: API returned null, trying haiku fallback (18 tools)
2026-01-30T22:51:32.813Z [DEBUG] [API:request] Creating client, ANTHROPIC_CUSTOM_HEADERS present: false, has Authorization header: false
2026-01-30T22:51:32.813Z [DEBUG] [API:auth] OAuth token check starting
2026-01-30T22:51:32.814Z [DEBUG] [API:auth] OAuth token check complete
2026-01-30T22:51:32.824Z [DEBUG] countTokensWithFallback: haiku fallback failed: Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
2026-01-30T22:51:32.824Z [ERROR] Error: Error: Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
    at gy.validateHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:1008)
    at gy.buildHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:8502)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async gy.buildRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:7560)
    at async gy.makeRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:3388)
    at async Ei4 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3286:19323)
    at async mF1 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3286:3956)
    at async vp (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3286:4380)
    at async Lc4 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3132:554)
2026-01-30T22:51:32.824Z [DEBUG] countToolDefinitionTokens returned null for 18 tools: Task, TaskOutput, Bash, Glob, Grep, ExitPlanMode, Read, Edit, Write, NotebookEdit, WebFetch, TodoWri...
2026-01-30T22:51:32.834Z [DEBUG] Session index: added 1, updated 2, removed 0, summaries generated 0 (total: 3)
2026-01-30T22:51:32.927Z [DEBUG] Tool search disabled for model 'claude-haiku-4-5-20251001': model does not support tool_reference blocks. This feature is only available on Claude Sonnet 4+, Opus 4+, and newer models.
2026-01-30T22:51:32.930Z [DEBUG] Auto tool search disabled: 0 tokens (threshold: 20000, 10% of context) [source: query]
2026-01-30T22:51:32.934Z [DEBUG] attribution header x-anthropic-billing-header: cc_version=2.1.27.e5b; cc_entrypoint=sdk-cli;
2026-01-30T22:51:32.939Z [DEBUG] [API:request] Creating client, ANTHROPIC_CUSTOM_HEADERS present: false, has Authorization header: false
2026-01-30T22:51:32.939Z [DEBUG] [API:auth] OAuth token check starting
2026-01-30T22:51:32.972Z [DEBUG] [API:auth] OAuth token check complete
2026-01-30T22:51:32.978Z [DEBUG] attribution header x-anthropic-billing-header: cc_version=2.1.27.84b; cc_entrypoint=sdk-cli;
2026-01-30T22:51:32.984Z [ERROR] ReferenceError: ReferenceError: Bun is not defined
    at Z34 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:1602:27809)
    at f34 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:1614:83)
    at C5q (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:4787:6330)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:4787:3611
    at async Z$A (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:1027:2007)
    at async pM1 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:4787:3581)
    at async mN (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3186:5201)
    at async EGq.submitMessage (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:6213:5309)
    at async kGq (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:6213:9425)
2026-01-30T22:51:32.984Z [DEBUG] [API:request] Creating client, ANTHROPIC_CUSTOM_HEADERS present: false, has Authorization header: false
2026-01-30T22:51:32.984Z [DEBUG] [API:auth] OAuth token check starting
2026-01-30T22:51:32.992Z [DEBUG] [API:auth] OAuth token check complete
2026-01-30T22:51:32.995Z [ERROR] API error (attempt 1/11): Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
2026-01-30T22:51:32.995Z [ERROR] Error in non-streaming fallback: Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
2026-01-30T22:51:32.996Z [ERROR] Error: Error: Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
    at gy.validateHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:1008)
    at gy.buildHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:8502)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async gy.buildRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:7560)
    at async gy.makeRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:3388)
2026-01-30T22:51:32.998Z [ERROR] API error (attempt 1/11): Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
2026-01-30T22:51:32.998Z [ERROR] Error in non-streaming fallback: Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
2026-01-30T22:51:32.998Z [ERROR] Error: Error: Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted
    at gy.validateHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:1008)
    at gy.buildHeaders (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:8502)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async gy.buildRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:7560)
    at async gy.makeRequest (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:421:3388)
2026-01-30T22:51:33.033Z [DEBUG] Getting matching hook commands for Stop with query: undefined
2026-01-30T22:51:33.033Z [DEBUG] Found 0 hook matchers in settings
2026-01-30T22:51:33.033Z [DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
2026-01-30T22:51:33.034Z [DEBUG] Getting matching hook commands for SessionEnd with query: other
2026-01-30T22:51:33.034Z [DEBUG] Found 0 hook matchers in settings
2026-01-30T22:51:33.034Z [DEBUG] Matched 0 unique hooks for query "other" (0 before deduplication)
